# Telegram AI Assistant
Это приложение представляет собой Telegram-бота, который интегрирует возможности ИИ с использованием библиотеки Telethon для взаимодействия с Telegram API и различных моделей ИИ, предоставляемых пакетом g4f. Бот слушает новые сообщения от указанных пользователей и отвечает сгенерированными ИИ ответами. Настройка и управление состоянием выполняются через простой графический интерфейс, созданный с использованием Tkinter, а поведение бота можно настраивать через различные параметры.

## Функции
- Аутентификация с Telegram API.
- Настраиваемые целевые имена пользователей для прослушивания входящих сообщений.
- Выбор моделей ИИ для генерации ответов.
- Настраиваемое системное сообщение для управления ответами ИИ.
- Возможность включения подписи в ответах ИИ.
- Управление запуском/остановкой работы бота.
- Сохранение конфигурации с использованием JSON-файла.

## Требования
- Python 3.7+
- Telethon
- Tkinter
- g4f 
- asyncio
- threading
- curl_cffi
## Установка
### 1. Клонирование репозитория:
```bash
git clone https://github.com/DimaV01/Telegram-AI-Assistant.git
cd Telegram-AI-Assistant
```

### 2. Установка необходимых пакетов:
```bash
pip install telethon curl_cffi
```
Дополнительно убедитесь, что tkinter установлен. В большинстве систем он включен в состав Python, но если нет, установите его через ваш пакетный менеджер.

# Установка g4f

```bash
pip install g4f
```

# Конфигурация

### 1. Получите ваши api_id и api_hash [здесь](https://tlgrm.ru/docs/api/obtaining_api_id#:~:text=Для%20получения%20API%20id%20и,development%20tools'%20и%20заполнить%20форму.).
### 2. Обновите DATA_FILE:

При первом запуске вам нужно будет ввести учетные данные Telegram API, номер телефона, целевые имена пользователей, модель ИИ и системное сообщение. Эти данные будут сохранены в data.json.

# Использование
### 1. Запуск приложения:
```bash
python main.py
```
или

```bash
.\main.exe
```
### 2. Компоненты GUI:

- API ID & Hash: Введите ваши учетные данные Telegram API.
- Phone Number: Введите ваш номер телефона, зарегистрированный в Telegram.
- Send Code: Отправка кода авторизации на ваш телефон.
- Telegram Code: Введите полученный код авторизации.
- Verify Code: Подтверждение кода и завершение входа в систему.
- Target Usernames: Список имен пользователей для прослушивания сообщений (через запятую).
- Model: Выберите модель ИИ для генерации ответов.
- System Message: Пользовательское сообщение для управления поведением ИИ.
- Sign AI Replies: Переключатель для включения подписи в ответах ИИ.
- Start/Stop Button: Запуск или остановка бота.
- Log Out Button: Выход из системы и очистка данных сессии.
- Status Label: Отображает текущий статус и сообщения.

# Подробное объяснение кода
### Глобальные переменные:

- DATA_FILE: Путь к JSON-файлу, где хранятся конфигурационные данные.
- client: Экземпляр TelegramClient, используемый для взаимодействия с Telegram API.
- running: Булевый флаг для указания, работает ли бот.
- loop: Цикл событий для управления асинхронными операциями.
### Функции:

- load_data(): Загружает конфигурационные данные из DATA_FILE.
- save_data(): Сохраняет текущую конфигурацию в DATA_FILE.
- send_code(): Отправляет код авторизации на телефон пользователя.
- verify_code(): Проверяет полученный код и завершает вход в систему.
- toggle_bot(): Запускает или останавливает бота в зависимости от текущего состояния.
- start_bot(model, system_message): Асинхронная функция для запуска бота и прослушивания сообщений.
- stop_bot(): Останавливает бота и отключает клиента.
- log_out(): Выход из системы Telegram и очистка данных сессии.
- on_closing(): Обрабатывает закрытие приложения, обеспечивая правильное завершение работы и сохранение состояния.
# Настройка GUI с помощью Tkinter
## Главное окно:

- Заголовок: "Telegram AI Assistant"
- Иконка: icon.ico
- Протокол для закрытия окна, обеспечивающий правильное завершение работы.

## Компоненты:

- Метки, поля ввода, кнопки и текстовые виджеты для различных входных данных и управления.
- Комбобокс для выбора модели ИИ.
- Флажок для переключения подписи в ответах ИИ.
- Метка состояния для отображения сообщений и обновлений состояния.
# Обработка событий
## Авторизация:

- Отправка кода на телефон пользователя и его проверка.
- Проверка, авторизован ли пользователь, чтобы избежать повторных входов.
## Работа бота:

- Прослушивание новых сообщений от указанных пользователей и генерация ответов ИИ.
- Использование выбранной модели ИИ и системного сообщения для управления ответами.
- Отправка ответов обратно пользователю, при необходимости с подписью.
# Устранение неполадок
## Ошибки подключения:

- Убедитесь, что у вас стабильное интернет-соединение.
- Проверьте ваши учетные данные API и номер телефона.

## Ошибки модели ИИ:

- Убедитесь, что пакет g4f правильно установлен и настроен.
- Проверьте, что выбранная модель ИИ доступна и функциональна.

## Управление сессиями:

- Если возникают проблемы с управлением сессиями, удалите файл TGAI.session и войдите в систему снова.
# Вклад
Приветствуются ваши вклады! Пожалуйста, форкните репозиторий и отправьте pull request с вашими изменениями.

# Лицензия
Этот проект лицензирован по лицензии Apache License - см. файл LICENSE для подробностей.

# Благодарности
Telethon за клиент Telegram API.
g4f за интеграцию моделей ИИ.

Если у вас есть вопросы или проблемы, не стесняйтесь обращаться. Наслаждайтесь вашим Telegram помощником с ИИ!